{"componentChunkName":"component---src-templates-resource-detail-index-jsx","path":"/blog/mysql-romote","result":{"data":{"locales":{"edges":[{"node":{"ns":"translation","data":"{\"Documentation\":\"文档\",\"FAQ\":\"常见问题\",\"NEXT\":\"下一页\",\"PREV\":\"上一页\",\"Product List\":\"产品列表\",\"ALL\":\"全部\",\"No relevant data found\":\"未找到相关数据\",\"Get it Now\":\"立即获取\",\"Overview\":\"概述\",\"Highlights\":\"亮点\",\"Description\":\"详情\",\"Related Applications\":\"相关应用\",\"Learning Materials\":\"学习资料\",\"Classification\":\"分类\",\"Os\":\"系统\",\"Open Source License\":\"开源许可\",\"Support Language\":\"支持语言\",\"Languages\":\"编程语言\",\"Solution\":\"场景方案\",\"Resource\":\"资源\",\"Applicable Personnel\":\"适用人员\",\"Resource List\":\"资源列表\",\"Official Website\":\"官网\",\"Feedback\":\"沟通反馈\",\"Submit A Suggestion\":\"提交此应用的建议\",\"Get Professional Services\":\"获取专业服务\",\"Tags\":\"关键词\",\"Author\":\"作者\",\"Related Reading\":\"相关阅读\",\"Resource Center\":\"资源中心\",\"Challengeg\":\"挑战\",\"How do we solve it?\":\"我们如何解决?\",\"More solution\":\"更多方案\",\"Type of asset\":\"类型\",\"Categories\":\"类别\",\"Resource Download\":\"资料下载\",\"Discover Now\":\"阅读详情\",\"Become a Partner\":\"成为伙伴\",\"Invoicing\":\"开具发票\",\"7×24 Tickets\":\"7×24 工单\",\"BROWSE ALL\":\"浏览所有\",\"Services List\":\"服务列表\",\"Service Type\":\"服务类别\",\"Service Object\":\"服务对象\",\"Content directory\":\"内容目录\",\"mo\":\"月\",\"y\":\"年\",\"Benefit\":\"好处\",\"What do we do\":\"我们怎么做\",\"Cases\":\"案例\",\"Purchase and price\":\"购买与价格\",\"Service portfolio\":\"服务组合\",\"Related Services\":\"相关服务\",\"Business insight\":\"业务洞察\",\"Components\":\"相关组件\"}","language":"zh-CN"}}]},"site":{"siteMetadata":{"copyright":"备案：湘ICP备16009117号","description":"为用户提供简单的云原生应用，帮助软件开发商构建基于全球云计算的在线商业体系","socials":[{"icon":"fab fa-github social-link-icon","id":1,"link":"https://github.com/","title":"github"},{"icon":"fab fa-twitter social-link-icon","id":2,"link":"https://www.twitter.com","title":"Twitter"},{"icon":"fab fa-instagram social-link-icon","id":3,"link":"https://www.instagram.com","title":"Instagram"},{"icon":"fab fa-linkedin social-link-icon","id":4,"link":"https://www.linkedin.com","title":"Linkedin"},{"icon":"fab fa-pinterest social-link-icon","id":5,"link":"https://pinterest.com","title":"Pinterest"}]}},"RelatedReading":{"nodes":[{"id":"045c8c29-4e09-5f29-bbed-b29d211615fb","slug":"software-supply-chain","title":"软件供应链","image":"https://libs.websoft9.com/Websoft9/resource/solution/softwarescm-feature-websoft9.png","type":{"id":"ffbb8d0c-2d15-5add-9a32-4e36e353a203","key":"solution","title":"解决方案"}},{"id":"bd9e2836-aedb-556f-91d5-eb23e91e8891","slug":"digtal-committee-start-changsha","title":"数字经济专业委员会在长沙成立，Websoft9 助力传统企业转型","image":"https://libs.websoft9.com/Websoft9/resource/blog/2022/10/digtal-commit-start-cs.jpg","type":{"id":"c0003798-cdad-534f-af28-121e7d8278cb","key":"news","title":"新闻"}},{"id":"17c4039d-5e09-55dc-9bc8-c19dfb8eff6c","slug":"open-knowledge-base","title":"知识协作","image":"https://libs.websoft9.com/Websoft9/resource/solution/open-km-hero-websoft9.webp","type":{"id":"ffbb8d0c-2d15-5add-9a32-4e36e353a203","key":"solution","title":"解决方案"}}]},"allContentfulResource":{"nodes":[{"id":"bb9df022-bfe2-5f53-a884-4ed175d1402e","slug":"mysql-romote","title":"如何开启MySQL远程连接","description":null,"image":null,"type":{"id":"0a810898-e829-5004-8809-ea2fb20621d4","key":"blog","title":"博客"},"author":[{"id":"8dce9d8a-0d75-5062-a1d6-75d09e764908","title":"CEO","fullName":"Websoft9","pictureUrl":"https://libs.websoft9.com/Websoft9/logo/person/cdl.jpeg"}],"content":{"id":"6bcb1f21-ba02-5dea-9c31-9856a112a40c","content":"MySql-Server 出于安全方面考虑只允许本机(localhost, 127.0.0.1)来连接访问. 这对于 Web-Server 与 MySql-Server 都在同一台服务器上的网站架构来说是没有问题的. 但随着网站流量的增加, 后期服务器架构可能会将 Web-Server 与 MySql-Server 分别放在独立的服务器上, 以便得到更大性能的提升, 此时 MySql-Server 就要修改成允许 Web-Server 进行远程连接.\n\n开启了远程连接，数据库的后期管理运维也不用每次都登到服务器，只要用图形化界面（如phpMyAdmin）即可远程管理。\n\n开启MySql-Server远程连接主要从**授权访问ip和服务器端口**进行操作:\n1. 在服务器上登录 Mysql-Server 连接本地 mysql (默认只允许本地连接，phpMyAdmin的远程访问实际相当于本地连接):\n```\n[root@iZq2mvq6snkcniZ ~]# mysql -uroot -p123456      \n```\n123456是密码，请使用您数据库的密码。此处以命令行登录举例，也可以使用图形界面等。\n\n2. 修改 Mysql-Server 用户配置:\n```\nMySQL [(none)]>use mysql;\n#查看现有用户,密码及允许连接的主机\nMySQL [mysql]> SELECT User, Password, Host FROM user;        \n+------+-------------------------------------------+-----------+\n| User | Password                                  | Host      |\n+------+-------------------------------------------+-----------+\n| root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 | localhost |\n| root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 | 127.0.0.1 |\n+------+-------------------------------------------+-----------+\n2 rows in set (0.00 sec)\n\n#设置为所有IP都可以访问，比较危险，不建议。\nMySQL [mysql]> UPDATE user SET Host=@'%' where user='root' AND Host='localhost' LIMIT 1;       \nMySQL [mysql]> flush privileges;\n#再次查看现有用户,密码及允许连接的主机\nMySQL [mysql]> SELECT User, Password, Host FROM user;       \n+------+-------------------------------------------+-----------+\n| User | Password                                  | Host      |\n+------+-------------------------------------------+-----------+\n| root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 |           |\n| root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 | 127.0.0.1 |\n+------+-------------------------------------------+-----------+\n```\n3. 最后，请注意在linux服务器上，默认3306端口是关闭的，不允许远程访问。因此需要打开3306端口供mysql远程连接使用，端口打开方法：\n```\n[root@iZq2mvq6snkcniZ ~]# iptables -I INPUT 4 -p tcp -m state --state NEW -m tcp --dport 3306 -j ACCEPT\n[root@iZq2mvq6snkcniZ ~]# service iptables save\n```\n至此，就可以真正远程访问数据库了，远程访问举例：\n\n![](https://libs-websoft9-com.oss-cn-qingdao.aliyuncs.com/Websoft9/blog/zh/2020/09/mysql-remote-websoft9.png)\n\n其他命令参考：\n下面我们配置 root 用户： 密码为空, 只允许从 192.168.1.100 连接\n```\nmysql> GRANT ALL PRIVILEGES ON *.* TO 'root'@'192.168.1.100' IDENTIFIED BY '' WITH GRANT OPTION;\n@'192.168.1.100'可以替换为@‘%’就可任意ip访问，当然我们也可以直接用 UPDATE 更新 root 用户 Host, SQL如下:\nmysql> UPDATE user SET Host='192.168.1.100' WHERE User='root' AND Host='localhost' LIMIT 1;\n```","childMarkdownRemark":{"html":"<p>MySql-Server 出于安全方面考虑只允许本机(localhost, 127.0.0.1)来连接访问. 这对于 Web-Server 与 MySql-Server 都在同一台服务器上的网站架构来说是没有问题的. 但随着网站流量的增加, 后期服务器架构可能会将 Web-Server 与 MySql-Server 分别放在独立的服务器上, 以便得到更大性能的提升, 此时 MySql-Server 就要修改成允许 Web-Server 进行远程连接.</p>\n<p>开启了远程连接，数据库的后期管理运维也不用每次都登到服务器，只要用图形化界面（如phpMyAdmin）即可远程管理。</p>\n<p>开启MySql-Server远程连接主要从<strong>授权访问ip和服务器端口</strong>进行操作:</p>\n<ol>\n<li>在服务器上登录 Mysql-Server 连接本地 mysql (默认只允许本地连接，phpMyAdmin的远程访问实际相当于本地连接):</li>\n</ol>\n<pre><code>[root@iZq2mvq6snkcniZ ~]# mysql -uroot -p123456      \n</code></pre>\n<p>123456是密码，请使用您数据库的密码。此处以命令行登录举例，也可以使用图形界面等。</p>\n<ol start=\"2\">\n<li>修改 Mysql-Server 用户配置:</li>\n</ol>\n<pre><code>MySQL [(none)]>use mysql;\n#查看现有用户,密码及允许连接的主机\nMySQL [mysql]> SELECT User, Password, Host FROM user;        \n+------+-------------------------------------------+-----------+\n| User | Password                                  | Host      |\n+------+-------------------------------------------+-----------+\n| root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 | localhost |\n| root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 | 127.0.0.1 |\n+------+-------------------------------------------+-----------+\n2 rows in set (0.00 sec)\n\n#设置为所有IP都可以访问，比较危险，不建议。\nMySQL [mysql]> UPDATE user SET Host=@'%' where user='root' AND Host='localhost' LIMIT 1;       \nMySQL [mysql]> flush privileges;\n#再次查看现有用户,密码及允许连接的主机\nMySQL [mysql]> SELECT User, Password, Host FROM user;       \n+------+-------------------------------------------+-----------+\n| User | Password                                  | Host      |\n+------+-------------------------------------------+-----------+\n| root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 |           |\n| root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 | 127.0.0.1 |\n+------+-------------------------------------------+-----------+\n</code></pre>\n<ol start=\"3\">\n<li>最后，请注意在linux服务器上，默认3306端口是关闭的，不允许远程访问。因此需要打开3306端口供mysql远程连接使用，端口打开方法：</li>\n</ol>\n<pre><code>[root@iZq2mvq6snkcniZ ~]# iptables -I INPUT 4 -p tcp -m state --state NEW -m tcp --dport 3306 -j ACCEPT\n[root@iZq2mvq6snkcniZ ~]# service iptables save\n</code></pre>\n<p>至此，就可以真正远程访问数据库了，远程访问举例：</p>\n<p><img src=\"https://libs-websoft9-com.oss-cn-qingdao.aliyuncs.com/Websoft9/blog/zh/2020/09/mysql-remote-websoft9.png\" alt=\"\"></p>\n<p>其他命令参考：\n下面我们配置 root 用户： 密码为空, 只允许从 192.168.1.100 连接</p>\n<pre><code>mysql> GRANT ALL PRIVILEGES ON *.* TO 'root'@'192.168.1.100' IDENTIFIED BY '' WITH GRANT OPTION;\n@'192.168.1.100'可以替换为@‘%’就可任意ip访问，当然我们也可以直接用 UPDATE 更新 root 用户 Host, SQL如下:\nmysql> UPDATE user SET Host='192.168.1.100' WHERE User='root' AND Host='localhost' LIMIT 1;\n</code></pre>"}},"persons":null,"customers":null,"products":null,"solutions":null,"tags":null,"time":"2018-06-17","downloadUrl":null}]}},"pageContext":{"slug":"mysql-romote","breadcrumb":{"location":"/blog/mysql-romote","crumbs":[{"pathname":"/","crumbLabel":"Home"},{"pathname":"/blog","crumbLabel":"blog"},{"pathname":"/blog/mysql-romote","crumbLabel":"mysql-romote"}]},"language":"zh-CN","i18n":{"language":"zh-CN","languages":["en-US","zh-CN"],"defaultLanguage":"zh-CN","generateDefaultLanguagePage":false,"routed":false,"originalPath":"/blog/mysql-romote","path":"/blog/mysql-romote"}}},"staticQueryHashes":["2390569662","3367695531","3666294474","3881056605","931386620"]}